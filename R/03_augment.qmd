---
title: "03_augment"
format: html
editor: visual
---

## Data Augmentation

Put DLH14 and DMH14 into one column - L for low, M for medium, C for control, NA for not known.

Make a new column of the group name

```{r}

#Removing comment columns
data_clean_smaller <- data_clean_correctHepDose |> 
  select(-c(DMAJNCHX,DNOSTRKX,DSIDEX,DDEADX,FDEADX))
```

```{r}
data_clean_properOCcode <- data_clean_smaller |> 
  mutate(OCCODE = case_when(
    OCCODE == 0 ~ NA,
    OCCODE == 1 ~ "dead",
    OCCODE == 2 ~ "dependent",
    OCCODE == 3 ~ "not recovered",
    OCCODE == 4 ~ "recovered",
    OCCODE == 8 ~ NA,
    OCCODE == 9 ~ NA))
```

```{r}
data_clean_properOCcode <- data_clean_properOCcode |> 
  mutate(DEAD = case_when(
    OCCODE == 0 ~ NA,
    OCCODE == 1 ~ "dead",
    OCCODE == 2 ~ "dependent",
    OCCODE == 3 ~ "not recovered",
    OCCODE == 4 ~ "recovered",
    OCCODE == 8 ~ NA,
    OCCODE == 9 ~ NA))
```

```{r}
#Removing ambigious columns
data_clean_properOCcode <-  data_clean_properOCcode |> 
  rename("DEADD" = DDEADD) |> 
  select(-FDEADD)
```

```{r}

data_clean_properDEADcode <- data_clean_properOCcode |> 
  mutate(DEAD1 = if_else(DEAD1 == 1, "1", ""),
         DEAD2 = if_else(DEAD2 == 1, "2", ""),
         DEAD3 = if_else(DEAD3 == 1, "3", ""),
         DEAD4 = if_else(DEAD4 == 1, "4", ""),
         DEAD5 = if_else(DEAD5 == 1, "5", ""),
         DEAD6 = if_else(DEAD6 == 1, "6", ""),
         DEAD7 = if_else(DEAD7 == 1, "7", ""),
         DEAD8 = if_else(DEAD8 == 1, "8", "")) |>
  unite(DEADC, c(DEAD1,DEAD2,DEAD3,DEAD4,DEAD5,DEAD6,DEAD7,DEAD8), sep = "") |> 
  mutate(DEADC = na_if(DEADC,""))
```

Remove CNTRYNUM (only use abbreviated country code)

Remove DIED - no description of column in variable name table

Remove DEAD - no description of column in variable name table

Remove HOSNUM - not really interesting

Remove NCCODE - overview of reasons for non-compliance
