---
title: "Initial Stroke Analysis"
subtitle: "Group 29: Helena MÃ¸ller, Emma Christiansen, Casper Harreby, Frederik Holmstrup, and Laura Christiansen"
format:
  revealjs:
    css: styles.css
    footer: "R for Bio Data Science"
    embed-resources: true
editor: visual
---

```{r}
#| include: false
library("here")
```


## Introduction

### The International Stroke Trial v. 2 data

-   Assessing efficacy and safety of antithrombotic therapy compared to control.
-   Antithrombotic agents: Aspirin and subcutaneous Heparin.

### Ischaemic stroke and treatments

-   **Ischaemic stroke**: Medical condition in which poor blood flow to a part of the brain causes cell death

### Project Aim

-   Assessing effects of antithrombotics (heparin and aspirin) for recurrent ischaemic strokes

## Methods

### Raw data:

-   19435 observations with 112 variables.

### 01_load:

-   Data has been loaded and saved in a tsv-file.

### 02_clean:

-   Global syntax of NA, and Y/N for binary variables.
-   Global syntax for the use of numbers 1-8 as to describe causes of death.
-   Correction of errors made when the data was collected.
-   Removal of column determined to be irrelevant.
-   Merging of columns for easier data analysis.
-   Data was split and re-joined into one.

### 03_augment

-   Groups created based on different treatments, and different doses of aspirin and heparin.
```{.r}
# 03_augment.qmd
# Calculating "body fat percentage" and "conicity index".
# Add new variables
diabetes_data <- diabetes_data |> 
  mutate(bin_sex = case_when(
                    sex == "male" ~ 1,
                    sex == "female" ~ 0
                  ),
         bfp = 1.39*bmi+0.16*age-10.34*bin_sex-9,
         waist_m = waist/100,
         height_m = height/100,
         ci = waist_m/(0.109*sqrt(weight/(height_m))),
         dm_status = case_when(
                      diagnosis == 0 ~ 1,
                      diagnosis == 1 & medication == 0 ~ 2,
                      diagnosis == 1 & medication == 1 ~ 3
         ))
```

## Descriptive analysis

:::: {.columns}
::: {.column width="50%"}

- **Observations/patients**: 19,435  
- **Variables**: 98 
- **Treatment groups**: 6

```{r, echo = FALSE, out.width = "500px"}
print("Missing treatment group image")
#knitr::include_graphics(here("doc/images/treatment_groups.png"))
knitr::include_graphics(here("results/04_description_plot_1.png"))
```
:::
:::{.column width="50%"}
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/04_description_plot_2.png"))
knitr::include_graphics(here("results/04_description_plot_3.png"))
```

:::
::::

## Impact of treatment on subgroups


:::: {.columns}
::: {.column width="50%"}
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/05_keyplot_2a.png"))
```
:::
::: {.column width="50%"}
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/05_keyplot_2b.png"))
```

:::
::::
## Models of the bla bla

```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/06_keyplot_2a.png"))
knitr::include_graphics(here("results/06_keyplot_2b.png"))
knitr::include_graphics(here("results/06_keyplot_2c.png"))
```

## Time of death after randomization

:::: {.columns}
::: {.column width="50%"}
- blabla
- blabla
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/07_keyplot_3a.png"))
```
:::
::: {.column width="50%"}
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/07_keyplot_3b.png"))
knitr::include_graphics(here("results/07_keyplot_3c.png"))
```
:::

## Events during first 14 days

:::: {.columns}
::: {.column width="50%"}
- Patients receiving higher heparin doses and asprin are more frequent in cerebral bleed/haemorrhagic stroke group
- Likewise, higher heparin doses and aspirin patients are more represented in patients with indicator of non-cerebral bleed
- Patient group receiving no trial medication had more subjects with indicator of pulmonary embolism
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/08_keyplot_4a.png"))
```
:::
::: {.column width="50%"}
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/08_keyplot_4b.png"))
knitr::include_graphics(here("results/08_keyplot_4c.png"))
```
:::
::::


## Data visualization: 

```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/08_keyplot_4c.png"))
```

## Kaplan Meier Plot after stroke: 

```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/09_keyplot_5aa.png"))
knitr::include_graphics(here("results/09_keyplot_5ab.png"))

```

## Chi squared test of the treatment effect
```{r, echo = FALSE, out.width = "500px"}
knitr::include_graphics(here("results/09_keyplot_5b.png"))
```

